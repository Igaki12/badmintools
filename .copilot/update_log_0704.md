# 更新履歴 - 2025年7月4日

## ヘルプモーダルの視認性向上

### 実施内容
- ヘルプモーダルの背景を白色に変更し、テキストの可読性を向上
- 従来のガラスモーフィズムデザインから、明確で読みやすい白背景デザインに変更

### 変更詳細
1. **モーダル背景**: `glass-card` クラスから `bg-white` に変更
2. **テキスト色**: 
   - タイトル: `theme-text-accent` → `text-gray-900`
   - 見出し: `theme-text-accent` → `text-gray-900`
   - 本文: `theme-text-secondary` → `text-gray-700`
   - 強調文字: `text-gray-900` を追加
3. **キーボードショートカット表示**: `glass-button` から `bg-gray-100 border border-gray-300` に変更
4. **モーダル外観**: 角丸、影、境界線を追加して明確な区切りを作成

### 改善効果
- テキストのコントラストが向上し、可読性が大幅に改善
- どのテーマでも一貫して読みやすい表示を実現
- キーボードショートカットの視認性が向上

### 追加修正 - 閉じるボタンの色調整
- `closeHelpModal` ボタンの色を他のテキストと統一
- 初期色: `text-gray-500` → `text-gray-700`
- ホバー色: `hover:text-gray-700` → `hover:text-gray-900`
- 本文テキスト（`text-gray-700`）と同じ色調に統一し、視覚的な一貫性を向上

## SHOT_VELOCITY_THRESHOLD の localStorage 対応

### 実施内容
- ショット検出閾値をlocalStorageから読み込み/保存する機能を追加
- cropPointsと同様に、設定値をブラウザに永続化

### 変更詳細
1. **初期値読み込み**: 
   - `SHOT_VELOCITY_THRESHOLD` の初期化時にlocalStorageから読み込み
   - 保存された値がない場合はデフォルト値 5000 を使用
2. **値の保存**: 
   - thresholdSliderの値が変更された際にlocalStorageに保存
   - キー名: `shotVelocityThreshold`
3. **UI初期化**: 
   - ページ読み込み時にスライダーと表示値をlocalStorageの値に設定

### 改善効果
- ユーザーが設定した閾値がページリロード後も保持される
- 個人の使用パターンに応じた閾値設定が可能
- cropPointsと同様の永続化機能で一貫性を保持

## cropPoints関連のバグを修正
- 別の動画を再生した時に、動画の画素数が異なる場合に、コート補正の四隅が画面外に出てしまい、補正をリセットしても触れる状態にならなかった → 補正をリセットするボタンの動作不良があった
- 「5生をリセットする」ボタンのイベントを修正し、コート補正が初期位置に戻るように修正した。

